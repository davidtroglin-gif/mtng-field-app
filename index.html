<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="manifest" href="./manifest.json" />
  <title>MTNG Field Forms</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; margin: 0; background:#f6f7f8; }
    header { position: sticky; top:0; background:white; padding:12px 14px; border-bottom:1px solid #ddd; }
    main { padding: 14px; max-width: 900px; margin: 0 auto; }
    .card { background:white; border:1px solid #e5e5e5; border-radius:12px; padding:12px; margin-bottom:12px; }
    label { display:block; font-weight:700; margin-top:10px; }
    input, textarea, select, button { width:100%; padding:10px; font-size:16px; margin-top:6px; box-sizing:border-box; }
    .row { display:flex; gap:10px; }
    .row > div { flex:1; }
    .checks { display:grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top:8px; }
    .check { display:grid; grid-template-columns: 1fr 1fr; gap:8px; align-items:center; background:#fafafa; padding:8px; border-radius:10px; border:1px solid #eee; }
    .checkp {padding-right:10px;}
    checkbox {float:right;}
    canvas { width:100%; border:1px solid #ccc; border-radius:12px; touch-action:none; background:white; }
    .btnrow { display:flex; gap:10px; }
    .btnrow button { flex:1; }
    .small { font-size: 12px; color:#666; }
    h3,h4 { margin: 0 0 8px; }
    
  </style>
</head>
<body>
  <header>
    <div class="row">
      <div>
        <label style="margin:0;">Select</label>
        <select id="pageType" name="Page Type">
          <option value="Leak Repair">Leak Repair</option>
          <option value="Mains">Mains</option>
          <option value="Retirement">Retirement</option>
          <option value="Services">Services</option>
        </select>
      </div>
      <div>
        <label style="margin:0;">Queue</label>
        <button id="syncNow" type="button">Sync Now</button>
      </div>
    </div>
    <div class="small" id="netStatus">Status: …</div>
    <div class="status" id="debug" style="margin-top:6px;font-size:12px;color:#444;"></div>
  </header>

  <main>
    <div class="card">
      <div class="btnrow">
        <button type="button" id="newForm">New Form</button>
        <button type="button" id="openDrafts">Drafts</button>
        <button type="button" id="openQueue">Queued</button>
      </div>
    </div>

    <form id="form" class="card">
    <!-- ===================================================== -->
    <!-- SHARED: CUSTOMER INFO (ALL PAGES)                     -->
    <!-- ===================================================== -->
      <section id="sectionCustomer">
        <h3>Customer / Job Info</h3>
      
        <label>Customer Name</label>
        <input name="Customer Name" />
      
        <label>Customer Address</label>
        <input name="Customer Address" />

        <label>Customer City</label>
            <input name="Customer City" />

        <label>Customer County</label>
            <input name="Customer County" />
    
        <label>Service Address (if different than customers)</label>
        <input name="Service Address (if different than customers)" />
      
             
        <label>Customer Phone</label>
        <input name="Customer Phone" />
      
        <label>Date</label>
        <input type="date" name="Date" />
      
        <div class="row">
          <div>
            <label>Contractor</label>
            <input name="Contractor" />
          </div>
          <div>
            <label>MLO Number</label>
            <input name="MLO Number" />
          </div>
         <div>
            <label>Register Number</label>
            <input name="Register Number" />
         </div>
        </div>
      </section>
      <!-- ===================================================== -->
      <!-- PAGE 1: LEAK REPAIR                                   -->
      <!-- ===================================================== -->
      <section id="sectionLeakRepair">
        <br><br>
        <h3>Leak Repair</h3>

        <label>Specific Location where leak occurred</label>
        <textarea name="Specific Location where leak occurred" rows="3"></textarea>

        <label>Date Leak Detected</label>
        <input type="date" name="Date Leak Detected" />

        <label>Leak Occurred On</label>
        <div class="checks">
          <div class="check"><span class="checkp">Farm Tap</span><input type="checkbox" name="Leak Occurred on - Farm Tap" /></div>
          <div class="check">Fitting<input type="checkbox" name="Leak Occurred on - Fitting" /></div>
          <div class="check">Meter<input type="checkbox" name="Leak Occurred on - Meter" /></div>
          <div class="check">Pipe<input type="checkbox" name="Leak Occurred on - Pipe" /></div>
          <div class="check">Regulator<input type="checkbox" name="Leak Occurred on - Regulator" /></div>
          <div class="check">Tap Connection<input type="checkbox" name="Leak Occurred on - Tap Connection" /></div>
          <div class="check">Valve<input type="checkbox" name="Leak Occurred on - Valve" /></div>
        </div>

        <label>Leak Repair Occurred On</label>
        <div class="row">
          <div><label>Pipe Type</label><input name="Leak Repair Occurred on - Pipe Type" /></div>
          <div><label>Size</label><input name="Leak Repair Occurred on - Size" /></div>
        </div>
        <div class="row">
          <div><label>Material</label><input name="Leak Repair Occurred on - Material" /></div>
          <div><label>Coating Type</label><input name="Leak Repair Occurred on - Coating Type" /></div>
        </div>

        <div class="row">
          <div><label>Leak Classification</label><input name="Leak Classification" /></div>
          <div><label>Damaged By</label><input name="Damaged By" /></div>
        </div>

        <label>Pipe Condition</label>
        <input name="Pipe Condition" />
        
        <div class="check" style="margin-top:10px;">
          Odor Readily Detectable
          <input type="checkbox" name="Odor Readily Detectable" />
        </div>        

        <h4 style="margin:14px 0 6px;">Pipe Materials Used for Repair</h4>
        <div class="small">Add additional rows as needed.</div>
        <div id="pipeMaterials"></div>
        <button type="button" id="addPipeMaterial">+ Add Pipe Material Row</button>

        <h4 style="margin:14px 0 6px;">Other Materials Used for Repair</h4>
        <div class="small">Add additional rows as needed.</div>
        <div id="otherMaterials"></div>
        <button type="button" id="addOtherMaterial">+ Add Other Material Row</button>

        <div class="row">
          <div><label>Type of Tap</label><input name="Type of Tap" /></div>
          <div><label>Stab Fittings</label><input name="Stab Fittings" /></div>
        </div>

        <label>Work Done (Explain Clearly)</label>
        <textarea name="Work Done (Explain Clearly)" rows="4"></textarea>

        <h4 style="margin:14px 0 6px;">Corrosion Found Complete Items 1-6</h4>
        <label>1. Conditions in area of pipe</label><input name="1. Conditions in area of pipe" />
        <label>2. Condition of pipe coating</label><input name="2. Condition of pipe coating" />
        <label>3. Extent of corroded areas</label><input name="3. Extent of corroded areas" />
        <label>4. Depth of any pits</label><input name="4. Depth of any pits" />
        <label>5. Reason for pipe exposure</label><input name="5. Reason for pipe exposure" />
        <label>6. Method of repair</label><input name="6. Method of repair" />

        <h4 style="margin:14px 0 6px;">Pipe Test Information</h4>
        <div id="pipeTests"></div>
        <button type="button" id="addPipeTest">+ Add Pipe Test Row</button>

        <div class="row">
          <div><label>Foreman</label><input name="Foreman" /></div>
          <div><label>Fusion Tech</label><input name="Fusion Tech" /></div>
        </div>
        <div class="row">
          <div><label>Steel Welder</label><input name="Steel Welder" /></div>
          <div><label>Contract Labor Hours</label><input name="Contract Labor Hours" /></div>
        </div>

        <label>Date Completed</label>
        <input type="date" name="Date Completed" />

        <label>MTNG On-Site Personnel</label>
        <input name="MTNG On-Site Personnel" />

        <label>Accepted By</label>
        <input name="Accepted By" />
      </section>

      <!-- ===================================================== -->
      <!-- PAGE 2: MAINS                                         -->
      <!-- ===================================================== -->
      <section id="sectionMains" style="display:none;">
        <br><br>
        <h3>Mains</h3>

        <div class="card" style="margin-top:12px;">
          <h4>Bore / Rock</h4>
          
          <div class="row">          
            <div class="check">Bore<input type="" name="Bore" /></div>
            <div class="check"><label>Bore Length (feet)</label><input name="Bore Length (feet)" /></div>
          </div>
          
          <div class="row">
            <div class="check">Directional Bore <input type="" name="Directional Bore" /></div>
            <div class="check"><label>Directional Bore Length (feet)</label><input name="Directional Bore Length (feet)" /></div>
          </div>
          
          <div class="row">
            <div class="check">Rock Bore<input type="" name="Rock Bore" /></div>
            <div class="check"><label>Rock Bore Length (feet)</label><input name="Rock Bore Length (feet)" /></div>
          </div>
          
          <div class="row">
            <div class="check">Rock 6x18<input type="checkbox" name="Rock 6x18" /></div>
            <div class="check"><label>Rock 6x18 Length (feet)</label><input name="Rock 6x18 Length (feet)" /></div>
          </div>
          
          <div class="row">
            <div class="check">Rock 12x18<input type="checkbox" name="Rock 12x18" /></div>
            <div class="check"><label>Rock 12x18 Length (feet)</label><input name="Rock 12x18 Length (feet)" /></div>
          </div>

          <div class="row">
            <div class="check">Rock 18x18<input type="checkbox" name="Rock 18x18" /></div>
            <div class="check"><label>Rock 18x18 Length (feet)</label><input name="Rock 18x18 Length (feet)" /></div>
          </div>

          <div class="row">
            <div class="check">Rock 24x24<input type="checkbox" name="Rock 24x24" /></div>
            <div class="check"><label>Rock 24x24 Length (feet)</label><input name="Rock 24x24 Length (feet)" /></div>
          </div>
        </div>

        <h4 style="margin:14px 0 6px;">Materials</h4>
        <div id="mainsMaterials"></div>
        <button type="button" id="addMainsMaterial">+ Add Materials Row</button>

        <h4 style="margin:14px 0 6px;">Other Materials</h4>
        <div id="mainsOtherMaterials"></div>
        <button type="button" id="addMainsOtherMaterial">+ Add Other Materials Row</button>

        <label>Total Footage</label>
        <input name="Total Footage" />

        <label>Type of Tap</label>
        <input name="Type of Tap" />

        <div class="check" style="margin-top:10px;">
          <input type="checkbox" name="Odor Readily Detectable" />
          Odor Readily Detectable
        </div>

        <label>Pipe Condition</label>
        <input name="Pipe Condition" />

        <label>Description of Work Completed</label>
        <textarea name="Description of Work Completed" rows="4"></textarea>

        <h4 style="margin:14px 0 6px;">Pipe Test Information</h4>
        <div id="mainsPipeTests"></div>
        <button type="button" id="addMainsPipeTest">+ Add Pipe Test Row</button>

        <div class="row">
          <div><label>Foreman</label><input name="Foreman" /></div>
          <div><label>Fusion Tech</label><input name="Fusion Tech" /></div>
        </div>
        <div class="row">
          <div><label>Steel Welder</label><input name="Steel Welder" /></div>
          <div><label>Contract Labor Hours</label><input name="Contract Labor Hours" /></div>
        </div>

        <label>Date Completed</label>
        <input type="date" name="Date Completed" />

        <label>MTNG On-Site Personnel</label>
        <input name="MTNG On-Site Personnel" />

        <label>Accepted By</label>
        <input name="Accepted By" />
      </section>

      <!-- ===================================================== -->
      <!-- PAGE 3: RETIREMENT                                    -->
      <!-- ===================================================== -->
      <section id="sectionRetirement" style="display:none;">
        <br><br>
        <h3>Retirement</h3>

        <h4 style="margin:14px 0 6px;"></h4>
        <div id="retSection"></div>
        <button type="button" id="addRetSection">+ Add Section Row</button>

        <h4 style="margin:14px 0 6px;">Materials &amp; Structures Retired</h4>
        <div id="retStructures"></div>
        <button type="button" id="addRetStructures">+ Add Row</button>

        <h4 style="margin:14px 0 6px;">New Materials Used for Retirement</h4>
        <div id="retNewMaterials"></div>
        <button type="button" id="addRetNewMaterials">+ Add Row</button>

        <label>Description of Work Completed</label>
        <textarea name="Description of Work Completed" rows="4"></textarea>

        <h4 style="margin:14px 0 6px;">Pipe Test Information</h4>
        <label>Date Tested</label>
        <input type="date" name="Date Tested" />
        <div class="check" style="margin-top:10px;">
          <input type="checkbox" name="Soaped with no leaks" />
          Soaped with no leaks
        </div>

        <div class="row">
          <div><label>Foreman</label><input name="Foreman" /></div>
          <div><label>Fusion Tech</label><input name="Fusion Tech" /></div>
        </div>
        <div class="row">
          <div><label>Steel Welder</label><input name="Steel Welder" /></div>
          <div><label>Contract Labor Hours</label><input name="Contract Labor Hours" /></div>
        </div>

        <label>Date Completed</label>
        <input type="date" name="Date Completed" />

        <label>MTNG On-Site Personnel</label>
        <input name="MTNG On-Site Personnel" />

        <label>Accepted By</label>
        <input name="Accepted By" />
      </section>

      <!-- ===================================================== -->
      <!-- PAGE 4: SERVICES                                      -->
      <!-- ===================================================== -->
      <section id="sectionServices" style="display:none;">
        <br><br>
        <h3>Services</h3>

        <div class="card" style="margin-top:12px;">
          <h4>Bore / Rock</h4>
          
          <div class="row">          
            <div class="check">Bore<input type="" name="Bore" /></div>
            <div class="check"><label>Bore Length (feet)</label><input name="Bore Length (feet)" /></div>
          </div>
          
          <div class="row">
            <div class="check">Directional Bore <input type="" name="Directional Bore" /></div>
            <div class="check"><label>Directional Bore Length (feet)</label><input name="Directional Bore Length (feet)" /></div>
          </div>
          
          <div class="row">
            <div class="check">Rock Bore<input type="" name="Rock Bore" /></div>
            <div class="check"><label>Rock Bore Length (feet)</label><input name="Rock Bore Length (feet)" /></div>
          </div>
          
          <div class="row">
            <div class="check">Rock 6x18<input type="checkbox" name="Rock 6x18" /></div>
            <div class="check"><label>Rock 6x18 Length (feet)</label><input name="Rock 6x18 Length (feet)" /></div>
          </div>
          
          <div class="row">
            <div class="check">Rock 12x18<input type="checkbox" name="Rock 12x18" /></div>
            <div class="check"><label>Rock 12x18 Length (feet)</label><input name="Rock 12x18 Length (feet)" /></div>
          </div>

          <div class="row">
            <div class="check">Rock 18x18<input type="checkbox" name="Rock 18x18" /></div>
            <div class="check"><label>Rock 18x18 Length (feet)</label><input name="Rock 18x18 Length (feet)" /></div>
          </div>

          <div class="row">
            <div class="check">Rock 24x24<input type="checkbox" name="Rock 24x24" /></div>
            <div class="check"><label>Rock 24x24 Length (feet)</label><input name="Rock 24x24 Length (feet)" /></div>
          </div>
        </div>

        <h4 style="margin:14px 0 6px;">Materials</h4>
        <div id="svcMaterials"></div>
        <button type="button" id="addSvcMaterial">+ Add Materials Row</button>

        <h4 style="margin:14px 0 6px;">Other Materials</h4>
        <div id="svcOtherMaterials"></div>
        <button type="button" id="addSvcOtherMaterial">+ Add Other Materials Row</button>

        <label>Total Length including riser (feet)</label>
        <input name="Total Length including riser (feet)" />

        <label>Excess Footage to be billed (feet)</label>
        <input name="Excess Footage to be billed (feet)" />

        <div class="check" style="margin-top:10px;">
          <input type="checkbox" name="Odor Readily Detectable" />
          Odor Readily Detectable
        </div>

        <label>Pipe Condition</label>
        <input name="Pipe Condition" />

        <label>Description of Work Completed</label>
        <textarea name="Description of Work Completed" rows="4"></textarea>

        <h4 style="margin:14px 0 6px;">Pipe Test Information</h4>
        <div id="svcPipeTests"></div>
        <button type="button" id="addSvcPipeTest">+ Add Pipe Test Row</button>

        <div class="row">
          <div><label>Foreman</label><input name="Foreman" /></div>
          <div><label>Fusion Tech</label><input name="Fusion Tech" /></div>
        </div>
        <div class="row">
          <div><label>Steel Welder</label><input name="Steel Welder" /></div>
          <div><label>Contract Labor Hours</label><input name="Contract Labor Hours" /></div>
        </div>

        <label>Date Completed</label>
        <input type="date" name="Date Completed" />

        <label>MTNG On-Site Personnel</label>
        <input name="MTNG On-Site Personnel" />

        <label>Accepted By</label>
        <input name="Accepted By" />
      </section>

      <!-- ===================================================== -->
      <!-- SHARED: SKETCH + PHOTOS + SUBMIT (ALL PAGES)           -->
      <!-- ===================================================== -->
      <h4 style="margin:14px 0 6px;">Sketch</h4>
      <canvas id="sketch" width="1200" height="700"></canvas>
      <div class="btnrow" style="margin-top:10px;">
        <button type="button" id="clearSketch">Clear Sketch</button>
        <button type="button" id="saveDraft">Save Draft</button>
      </div>

      <h4 style="margin:14px 0 6px;">Photos (max 5)</h4>
      <input id="photos" type="file" accept="image/*" multiple data-photos/>

      <div class="btnrow" style="margin-top:12px;">
        <button type="button" id="queueForSync">Queue for Sync</button>
        <button type="submit">Submit Now (if online)</button>
      </div>

      <div class="small" id="formMeta"></div>
    </form>

    <div class="card" id="listCard" style="display:none;"></div>
  </main>

  <script>
    document.getElementById("netStatus").textContent = "Status: Inline JS loaded ✅";
  </script>
  <script type="module" src="./app.js"></script>
</body>
</html>
























































